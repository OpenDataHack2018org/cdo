#! /bin/sh
#
# default configuration options and compiler flags for different hosts
#
#
CONFPATH=`echo $0 | cut -c 1-6`
if [ "$CONFPATH" != "../../" ] ; then
CONFPATH='./'
fi
#
if test -z "$1" ; then
  HOSTNAME=`hostname`
else
  HOSTNAME=$1
fi
#
set -x
#
case "${HOSTNAME}" in
# i386-apple-darwin10
    hama*)
	${CONFPATH}configure --prefix=$HOME/local \
                    --with-netcdf=/opt/local \
                    --with-hdf5=/opt/local \
                    --with-szlib=$HOME/local \
                    --with-proj=/opt/local \
	            CC=gcc CFLAGS="-g -pipe -D_REENTRANT -Wall -W -Wfloat-equal -pedantic -O2 -fopenmp"
	;;
# ia64-xxx-linux
    ds*)
	${CONFPATH}configure --prefix=$HOME/local \
                    --with-netcdf=/pool/ia64/netcdf/netcdf-3.6.0-p1 \
                    --with-szlib=$HOME/local \
                    CC=icc CFLAGS="-g -O2 -Wall -fno-alias -DMIN_BUF_SIZE=4194304"
	;;
    wasser*)
	${CONFPATH}configure --prefix=$HOME/local \
                    --with-netcdf=/home/dkrz/m214089/local/ia64 \
                    CC=icc CFLAGS="-g -O2 -Wall -fno-alias"
	;;
# x86_64-suse-linux
    tornado*)
 	${CONFPATH}configure --prefix=$HOME/local --exec_prefix=$HOME/local/sles10-x64 \
                    --enable-all-static \
	            --with-netcdf=/sw/sles10-x64/netcdf-4.0.1 \
	            --with-hdf5=/sw/sles10-x64/hdf5-1.8.2 \
                    --with-szlib=/sw/sles10-x64/szip-2.1 \
	            CC=gcc CFLAGS='-g -D_REENTRANT -Wall -O2 -fopenmp'
#	            CC=suncc CFLAGS="-g -D_REENTRANT -fast -xopenmp"
	;;        
# x86_64-etch-x64-linux
    squall*)
        ${CONFPATH}configure --prefix=$HOME/local --exec_prefix=$HOME/local/etch-x64 \
                    --enable-all-static \
                    --with-netcdf=/sw/etch-x64/netcdf-4.0.1 \
                    --with-hdf5=/sw/etch-x64/hdf5-1.8.2 \
                    --with-szlib=/sw/etch-x64/szip-2.1-static \
                    --with-proj=/sw/etch-x64/proj-4.7.0 \
                    CC=gcc CFLAGS='-g -D_REENTRANT -Wall -O2 -fopenmp'
	;;        
# x86_64-archlinux
    thingol*)
 	${CONFPATH}configure --prefix=`pwd`/build \
	            --with-netcdf=$HOME/src/cdo/branches/libs4cdo/build-split/netcdf-4.1.1 \
	              --with-hdf5=$HOME/src/cdo/branches/libs4cdo/build-split/hdf5-1.8.4 \
                     --with-szlib=$HOME/src/cdo/branches/libs4cdo/build-split/szip-2.1 \
                      --with-proj=$HOME/src/cdo/branches/libs4cdo/build-split/proj-4.6.1 \
                      --with-pic \
	            CC=gcc CFLAGS="-g -Wall -O2 -fopenmp -fPIC"
	;;        
# i686-suse-linux
    linux | laptop)
	${CONFPATH}configure --prefix=$HOME/local \
                    --with-jasper=/usr \
                    --with-grib_api=$HOME/local \
                    --with-netcdf=$HOME/local \
                    --with-hdf5=$HOME/local \
                    --with-szlib=$HOME/local \
	            CC=colorgcc CFLAGS="-g -D_REENTRANT -Wall -W -Wfloat-equal -pedantic -O2 -fopenmp"
	;;
# etch-ia32
    etch-ia32 | gata | baba)
 	${CONFPATH}configure --prefix=$HOME/local --exec_prefix=$HOME/local/etch-ia32 \
                    --with-jasper=/sw/etch-ia32/jasper-1.900.1 \
                    --with-grib_api=/scratch/local2/m214003/local \
	            --with-netcdf=/sw/etch-ia32/netcdf-4.1.1-gcc \
	            --with-hdf5=/sw/etch-ia32/hdf5-1.8.4-threadsafe \
                    --with-zlib=/sw/etch-ia32/zlib-1.2.3 \
                    --with-szlib=$HOME/local/etch-ia32 \
                    --with-proj=/sw/etch-ia32/proj-4.6.0 \
                    LIBS="-ljpeg"\
	            CC=gcc CFLAGS="-g -D_REENTRANT -Wall -W -Wfloat-equal -pedantic -O2"
        ;;
# dap enabled
    egmont | columbine)
 	  ${CONFPATH}configure --prefix=$HOME/local --exec_prefix=$HOME/local/etch-ia32 \
	            --with-netcdf=/sw/etch-ia32/netcdf-4.1.1-gcc \
	            --with-hdf5=/sw/etch-ia32/hdf5-1.8.4-threadsafe \
                    --with-zlib=/sw/etch-ia32/zlib-1.2.3 \
                    --with-szlib=/sw/etch-ia32/szip-2.1 \
                    --with-proj=/sw/etch-ia32/proj-4.6.0 \
	            CC=gcc CFLAGS="-g -D_REENTRANT -Wall -W -Wfloat-equal -pedantic -O2 -fopenmp"
    ;;
# i386-pc-solaris2.10
    grim | mil* )
	${CONFPATH}configure --prefix=$HOME/local --exec_prefix=$HOME/local/solaris10-x86 \
                    --with-netcdf=/client \
                    --with-szlib=$HOME/local/solaris10-x86 \
                    CC=cc CFLAGS="-g -mt -fast"
	;;
# sx6-nec-superux12.2
    cs*)
	${CONFPATH}configure --prefix=$HOME/local \
         	    --with-netcdf=/pool/netcdf/netcdf-3.6.0-p1 \
		    CC=cc \
                    CFLAGS="-O -Onooverlap,restrict=all -pvctl,fullmsg,noassume,loopcnt=1000000"
	;;
    sx6)
	${CONFPATH}configure --host=sx6 --prefix=$HOME/local \
                    --with-netcdf=/pool/SX-6/netcdf/netcdf-3.6.0-p1 \
		    CC=sxcc AR=sxar \
                    CFLAGS="-O -Onooverlap,restrict=all -pvctl,fullmsg,noassume,loopcnt=1000000"
	;;
    es)
	${CONFPATH}configure --host=sx6 --prefix=$HOME/local/ES \
                    --with-netcdf=/S/n010/home010/c0148/local/SX \
		    CC=escc AR=esar \
                    CFLAGS="-O -Onooverlap,restrict=all -pvctl,fullmsg,noassume,loopcnt=1000000"
	;;
# 5000-fujitsu-uxpv4.1_ES
    vpp5*)
	${CONFPATH}configure --prefix=$HOME \
	            --with-netcdf=$HOME/PROJ \
	            CC=vcc CFLAGS="-O -Wv,-m3 -K4"
	;;
# x86_64-unknown-linux-gnu (rhel55)
    lizard*)
        LDFLAGS="-Wl,-rpath=/sw/rhel55-x64/jasper-1.900.1/lib:/sw/rhel55-x64/hdf5-1.8.5-threadsafe/lib:/sw/rhel55-x64/szip-2.1/lib:/sw/rhel55-x64/netcdf-4.1.1/lib -lpng"
        export LDFLAGS
	${CONFPATH}configure --prefix=$HOME/local/rhel55-x64 \
                    --with-jasper=/sw/rhel55-x64/jasper-1.900.1 \
                    --with-grib_api=/sw/rhel55-x64/grib_api-1.9.0 \
                    --with-netcdf=/sw/rhel55-x64/netcdf-4.1.1 \
                    --with-hdf5=/sw/rhel55-x64/hdf5-1.8.5-threadsafe \
                    --with-szlib=/sw/rhel55-x64/szip-2.1 \
                    --with-zlib=/usr \
 	            CC=gcc CFLAGS="-g -D_REENTRANT -Wall -O2"
	;;
# powerpc-ibm-aix5.2.0.0
    ecga*)

	${CONFPATH}configure --prefix=$HOME/local \
                    --with-netcdf=/usr/local/apps/netCDF/3.6.2/LP64_underscore \
                    --with-szlib=$HOME/local \
	            CC=xlc_r CFLAGS="-g -O3 -q64 -qhot -qarch=auto -qtune=auto -qsmp=omp -DHAVE_MMAP"
	;;
# powerpc-ibm-aix5.3.0.0
    blizzard*)
	${CONFPATH}configure --prefix=$HOME/local \
                    --with-netcdf=/sw/aix61/netcdf-4.1.1-rc2 \
                    --with-hdf5=/sw/aix61/hdf5-1.8.4-patch1-threadsafe \
                    --with-zlib=/sw/aix53/zlib-1.2.3 \
                    --with-szlib=/sw/aix53/szip-2.1 \
                    --with-proj=/sw/aix53/proj-4.6.1 \
 	            CC=xlc_r CFLAGS="-g -O3 -q64 -qhot -qarch=auto -qtune=auto -qsmp=omp -DHAVE_MMAP" LDFLAGS="-brtl"
	;;
    vip*)
	${CONFPATH}configure --prefix=$HOME/local \
                    --with-netcdf=$HOME/local \
                    --with-szlib=$HOME/local \
	            CC=xlc_r CFLAGS="-g -O3 -q64 -qhot -qarch=auto -qtune=auto -qsmp=omp -DHAVE_MMAP"
	;;
# powerpc-ibm-aix6.0.0.0
    c1a*)
	${CONFPATH}configure --prefix=$HOME/local \
                    --with-netcdf=/usr/local/apps/netcdf/3.6.3/LP64 \
                    --with-hdf5=/usr/local/apps/hdf5/1.8.1/LP64 \
                    --with-szlib=/usr/local/apps/szip/2.1/LP64 \
	            CC=xlc_r CFLAGS="-g -O3 -q64 -qhot -qarch=auto -qtune=auto -qsmp=omp -DHAVE_MMAP"
	;;
# powerpc-ibm-aix6.0.0.0
    dwd | p???et01)
	${CONFPATH}configure --prefix=$HOME/local \
                    --with-netcdf=/uhome/mpischul/local \
	            CC=xlc_r CFLAGS="-g -O3 -q64 -qhot -qarch=auto -qtune=auto -qsmp=omp -DHAVE_MMAP"
	;;
# hppa2.0w-hp-hpux11.11
    moon)
        ${CONFPATH}configure --prefix=$HOME/local \
                    --with-netcdf=/S/n010/home010/c0148/local \
	            CC=cc CFLAGS="-g -fast"
	;;
    *)
	echo "configuration for hostname $HOSTNAME not found!"
	;;
esac
